{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/mikebaker/access/client/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Route, Switch, Link } from \"react-router-dom\";\nimport Login from './containers/Login';\nimport Home from './containers/Home';\nimport ListView from './containers/ListView';\nimport Register from './containers/Register';\nimport axios from 'axios';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      username: null,\n      uid: null\n    };\n    this.login = this.login.bind(this);\n    this.getData = this.getData.bind(this);\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  async getData() {\n    var url;\n    if (process.env.NODE_ENV === 'production') url = 'https://www.thelocalgame.com/login';else url = 'http://localhost:3000/user';\n    const response = await axios.post(url, {}, {\n      withCredentials: true\n    }).catch(error => {\n      if (error) this.setState({\n        showLoginError: true\n      });\n    }).then(function (response) {\n      if (response) {\n        this.setState({\n          username: response.data.username\n        });\n        this.setState({\n          uid: response.data.nodebb_uid\n        });\n        console.log(response.data);\n      }\n\n      return response;\n    });\n  }\n\n  async login(email, password) {\n    var url;\n    if (process.env.NODE_ENV === 'production') url = 'https://www.thelocalgame.com/login';else url = 'http://localhost:3000/login';\n    const response = await axios.post(url, {\n      email: email,\n      password: password\n    }, {\n      withCredentials: true\n    }).catch(error => {\n      if (error) this.setState({\n        showLoginError: true\n      });\n    });\n\n    if (response) {\n      document.cookie = `nodebb=${response.data}`;\n      this.setState({\n        username: email\n      }, async () => {\n        //after get username then add uid and data to state with another call\n        var userurl;\n        if (process.env.NODE_ENV === 'production') userurl = 'https://www.thelocalgame.com/login';else userurl = 'http://localhost/forum/api/user/' + this.state.username;\n        const response = await axios.get(userurl, {\n          withCredentials: true\n        }).catch(error => {\n          if (error) this.setState({\n            showLoginError: true\n          });\n        });\n\n        if (response) {\n          this.setState({\n            uid: response.data.uid\n          }, () => {\n            console.log(this.state);\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"master-content\",\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          exact: true,\n          render: props => /*#__PURE__*/_jsxDEV(Home, {\n            username: this.state.username,\n            uid: this.state.uid,\n            ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          exact: true,\n          render: props => /*#__PURE__*/_jsxDEV(Login, {\n            login: this.login.bind(this),\n            ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 55\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          exact: true,\n          render: props => /*#__PURE__*/_jsxDEV(Register, { ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 58\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/list\",\n          exact: true,\n          render: props => /*#__PURE__*/_jsxDEV(ListView, { ...props\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/user\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mikebaker/access/client/src/App.js"],"names":["React","Component","Route","Switch","Link","Login","Home","ListView","Register","axios","App","constructor","state","username","uid","login","bind","getData","componentDidMount","url","process","env","NODE_ENV","response","post","withCredentials","catch","error","setState","showLoginError","then","data","nodebb_uid","console","log","email","password","document","cookie","userurl","get","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Route,Switch,Link } from \"react-router-dom\";\nimport Login from './containers/Login';\nimport Home from './containers/Home';\nimport ListView from './containers/ListView';\nimport Register from './containers/Register';\nimport axios from 'axios';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n        username:null,\n        uid:null\n    }\n    this.login = this.login.bind(this);\n    this.getData = this.getData.bind(this);\n  };\n\n  componentDidMount() {\n      this.getData();\n\n  }\n\n  async getData (){\n  \n    var url;\n      if (process.env.NODE_ENV === 'production')\n        url = 'https://www.thelocalgame.com/login';\n      else\n        url = 'http://localhost:3000/user';\n      const response = await axios.post(url, {},{\n        withCredentials: true\n      }\n    ).catch(error => {\n        if (error)\n          this.setState({\n            showLoginError: true\n          })\n      }).then( function(response) { \n        if (response) {\n          this.setState({username:response.data.username});\n          this.setState({uid:response.data.nodebb_uid});\n          console.log(response.data)\n          \n        }\n        return response;\n    }) \n  }\n\n\n\n  async login(email, password) {\n    var url;\n    if (process.env.NODE_ENV === 'production')\n      url = 'https://www.thelocalgame.com/login';\n    else\n      url = 'http://localhost:3000/login';\n    const response = await axios.post(url, {\n      email: email,\n      password: password\n    }, {\n      withCredentials: true\n    }).catch(error => {\n      if (error)\n        this.setState({\n          showLoginError: true\n        })\n    })\n    if (response) {\n      document.cookie = `nodebb=${response.data}`\n      this.setState({\n        username:email\n      }, async () => {\n        //after get username then add uid and data to state with another call\n              var userurl;\n              if (process.env.NODE_ENV === 'production')\n              userurl = 'https://www.thelocalgame.com/login';\n              else\n              userurl = 'http://localhost/forum/api/user/'+this.state.username;\n                         \n              const response =  await axios.get(userurl, {\n                withCredentials: true\n              }).catch(error => {\n                if (error)\n                  this.setState({\n                    showLoginError: true\n                  })\n              })\n              if (response) {\n                this.setState({\n                  uid:response.data.uid\n                }, () => {console.log(this.state)});\n              }\n      \n            });\n    }\n\n\n  }\n\nrender() {\n  return (\n    <div id='master-content'>\n      <Switch>\n        <Route path=\"/\" exact render={(props) => <Home username={this.state.username} uid={this.state.uid} {...props}  />} />\n        <Route path=\"/login\" exact render={(props) => <Login login={this.login.bind(this)} {...props}  />} />\n        <Route path=\"/register\" exact render={(props) => <Register {...props}  />} />\n        <Route path=\"/list\" exact render={(props) => <ListView {...props}  />} />\n        <Route path=\"/user\"  />\n      </Switch>\n    </div>\n  );\n}\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}